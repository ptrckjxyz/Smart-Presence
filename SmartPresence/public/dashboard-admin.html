<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartPresence | Admin Dashboard</title>
  <link rel="stylesheet" href="css/dashboard.css" />
  <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
</head>
<body>
  <main>
    <div class="admin-grid">
    <!-- Teacher Verification Requests Section -->
    <section class="admin-section verify-teacher">
      <div class="section-header">
        <div>
          <h1>Teacher Verification Requests</h1>
          <p class="subtitle">Approve or decline pending teacher verifications.</p>
        </div>
        <button class="view-all-btn" onclick="openVerificationModal('teacher')">View All</button>
      </div>

      <div class="table-container">
        <table id="verifyTableTeacher">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>ID Number</th>
              <th>Document</th>
              <th>Face</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="verifyRequestsTeacher">
            <tr><td colspan="6">Loading pending teacher verifications...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Student Verification Requests Section -->
    <section class="admin-section verify-student">
      <div class="section-header">
        <div>
          <h1>Student Verification Requests</h1>
          <p class="subtitle">Approve or decline pending student verifications.</p>
        </div>
        <button class="view-all-btn" onclick="openVerificationModal('student')">View All</button>
      </div>

      <div class="table-container">
        <table id="verifyTableStudent">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>ID Number</th>
              <th>Document</th>
              <th>Face</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="verifyRequestsStudent">
            <tr><td colspan="6">Loading pending student verifications...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Verified Teacher Section -->
    <section class="admin-section verified-teacher">
      <div class="section-header">
        <div>
          <h1>Verified Teachers</h1>
          <p class="subtitle">View all approved teacher verifications.</p>
        </div>
        <button class="view-all-btn" onclick="openVerifiedModal('teacher')">View All</button>
      </div>

      <div class="table-container">
        <table id="verifiedTableTeacher">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>ID Number</th>
              <th>Document</th>
              <th>Face</th>
              <th>Verified At</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="verifiedRequestsTeacher">
            <tr><td colspan="7">Loading verified teacher list...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Verified Student Section -->
    <section class="admin-section verified-student">
      <div class="section-header">
        <div>
          <h1>Verified Students</h1>
          <p class="subtitle">View all approved student verifications.</p>
        </div>
        <button class="view-all-btn" onclick="openVerifiedModal('student')">View All</button>
      </div>

      <div class="table-container">
        <table id="verifiedTableStudent">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>ID Number</th>
              <th>Document</th>
              <th>Face</th>
              <th>Verified At</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="verifiedRequestsStudent">
            <tr><td colspan="7">Loading verified student list...</td></tr>
          </tbody>
        </table>
      </div>
    </section>
    </div>
  </main>

  <!-- üîπ Modals for admin interactions -->
  
  <!-- Approval Modal -->
  <div id="approveModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h3 id="approveTitle">Approve Verification Request?</h3>
      <p id="approveMessage">This user will be approved and added to verified users.</p>
      <div id="approveWarning" class="modal-warning" style="display: none;">
        <p style="color: #d97706; font-weight: 500;">‚ö†Ô∏è Warning: No face descriptor found. Face recognition will not be available for this user.</p>
      </div>
      <div class="modal-buttons">
        <button id="confirmApprove" class="confirm">Approve</button>
        <button id="cancelApprove" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Decline Modal -->
  <div id="declineModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h3 id="declineTitle">Decline Verification Request?</h3>
      <p id="declineMessage">This verification request will be rejected and the user will be notified.</p>
      <div class="modal-buttons">
        <button id="confirmDecline" class="confirm decline-action">Decline</button>
        <button id="cancelDecline" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Logout Modal -->
  <div id="logoutModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h3>Are you sure you want to logout?</h3>
      <div class="modal-buttons">
        <button id="confirmLogout" class="confirm">Logout</button>
        <button id="cancelLogout" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- View Face ID Modal -->
  <div id="viewFaceModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h3>View Face ID Image?</h3>
      <p>You will be redirected to view the facial verification image in a new tab.</p>
      <div class="modal-buttons">
        <button id="confirmViewFace" class="confirm">View Image</button>
        <button id="cancelViewFace" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- View ID Document Modal -->
  <div id="viewIDModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h3>View ID Document?</h3>
      <p>You will be redirected to view the ID document in a new tab.</p>
      <div class="modal-buttons">
        <button id="confirmViewID" class="confirm">View Document</button>
        <button id="cancelViewID" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Unverify User Modal -->
  <div id="unverifyModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <h3 id="unverifyTitle">Remove Verification?</h3>
      <p id="unverifyMessage">This user will need to go through the verification process again from the start.</p>
      <div class="modal-buttons">
        <button id="confirmUnverify" class="confirm decline-action">Unverify</button>
        <button id="cancelUnverify" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Verification Requests Modal -->
  <div id="verificationRequestsModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2 id="verificationModalTitle">Verification Requests</h2>
        <button onclick="closeVerificationModal()" class="modal-close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <table id="verificationModalTable" class="modal-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>ID Number</th>
              <th>Document</th>
              <th>Face</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="verificationModalBody"></tbody>
        </table>
      </div>
      <div class="modal-pagination">
        <button id="verifyPrevBtn" class="pagination-btn" onclick="verifyPrevPage()">‚Üê Previous</button>
        <span id="verifyPageInfo" class="page-info">Page 1</span>
        <button id="verifyNextBtn" class="pagination-btn" onclick="verifyNextPage()">Next ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- Verified Users Modal -->
  <div id="verifiedUsersModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2 id="verifiedModalTitle">Verified Users</h2>
        <button onclick="closeVerifiedModal()" class="modal-close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <table id="verifiedModalTable" class="modal-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>ID Number</th>
              <th>Document</th>
              <th>Face</th>
              <th>Verified At</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="verifiedModalBody"></tbody>
        </table>
      </div>
      <div class="modal-pagination">
        <button id="verifiedPrevBtn" class="pagination-btn" onclick="verifiedPrevPage()">‚Üê Previous</button>
        <span id="verifiedPageInfo" class="page-info">Page 1</span>
        <button id="verifiedNextBtn" class="pagination-btn" onclick="verifiedNextPage()">Next ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toastNotification" class="toast-notification">
    <div id="toastContent" class="toast-content">
      <span id="toastMessage"></span>
    </div>
  </div>

  <script type="module" src="./js/dashboard-admin.js"></script>
  <script type="module" src="js/navigation.js"></script>
</body>

</html>
