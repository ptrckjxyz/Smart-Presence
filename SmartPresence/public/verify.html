<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Verify Your Account | SmartPresence</title>
  <link rel="stylesheet" href="css/verify.css" />
  <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/gh/justadudewhohacks/face-api.js/dist/face-api.min.js"></script>
</head>
<body>

<main class="verify-container">
  <h1>Account Verification</h1>
  <p class="subtitle">Please fill in your school-related information and complete facial verification for secure access.</p>

  <form id="verifyForm">
    <!-- Step 1: Form -->
    <div id="step1">
      <div class="form-group">
        <label>Surname *</label>
        <input type="text" id="surname" placeholder="Enter your surname" required />
      </div>
      <div class="form-group">
        <label>First Name *</label>
        <input type="text" id="firstname" placeholder="Enter your first name" required />
      </div>
      <div class="form-group">
        <label>Middle Name</label>
        <input type="text" id="middlename" placeholder="Enter your middle name (optional)" />
      </div>
      <div class="form-group">
        <label>Age *</label>
        <input type="number" id="age" placeholder="Enter your age" required />
      </div>
      <div class="form-group">
        <label>Address *</label>
        <input type="text" id="address" placeholder="Enter your complete address" required />
      </div>
      <div class="form-group">
        <label>Email *</label>
        <input type="email" id="email" placeholder="Enter your email address" required />
      </div>
      <div class="form-group">
        <label>Contact Number *</label>
        <input type="text" id="contact" placeholder="Enter your contact number" required />
      </div>
      <div class="form-group">
        <label>ID Number *</label>
        <input type="text" id="idNumber" placeholder="Enter your student/employee ID" required />
      </div>

      <div class="form-group">
        <label>Upload Verification Document (Student/Teacher ID or Registration Form) *</label>
        <input type="file" id="documentUpload" accept="image/*,application/pdf" required />
      </div>

      <button type="button" id="nextStepBtn" class="submit-btn">
        Next: Face Verification ‚Üí
      </button>
    </div>

    <!-- Step 2: Facial Recognition - UPDATED TO MATCH FACE-RECOGNITION.HTML -->
    <div id="step2" style="display:none;">
      <div class="form-group">
        <label style="text-align:center; display:block; font-size:18px; margin-bottom:10px;">Facial Recognition Verification</label>
        <p style="text-align:center; color:#666; font-size:14px; margin-bottom:30px;">
          Position your face within the guide for automatic scanning
        </p>
        
        <div id="captureContainer" class="camera-wrapper">
          <div class="camera-frame">
            <video id="camera" autoplay playsinline muted></video>
            <canvas id="overlay"></canvas>
            <div class="scan-guide">
              <div class="guide-circle">
                <svg class="face-outline" viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg">
                  <!-- Snapchat-style Face with Ears and V-Jaw -->
                  <path d="M 100 35
                           C 125 35, 145 45, 160 65
                           C 170 80, 175 100, 178 120
                           
                           C 182 125, 185 132, 185 140
                           C 185 148, 182 155, 178 160
                           
                           C 176 175, 172 190, 165 205
                           C 158 218, 148 228, 135 235
                           C 120 242, 110 245, 100 246
                           C 90 245, 80 242, 65 235
                           C 52 228, 42 218, 35 205
                           C 28 190, 24 175, 22 160
                           
                           C 18 155, 15 148, 15 140
                           C 15 132, 18 125, 22 120
                           
                           C 25 100, 30 80, 40 65
                           C 55 45, 75 35, 100 35 Z" 
                        fill="none" 
                        stroke="white" 
                        stroke-width="6"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="face-path"/>
                </svg>
              </div>
            </div>
          </div>
          
          <div class="camera-instruction" id="cameraInstruction">
            Position your face within the circle
          </div>
        </div>

        <canvas id="snapshot" style="display:none;"></canvas>

        <div id="previewContainer" style="display:none; text-align:center; margin-top:30px;">
          <h3>Captured Photo Preview</h3>
          <img id="previewImage" alt="Preview Image" />
        </div>

        <p id="statusMessage" class="status-message"></p>
      </div>
    </div>
  </form>
</main>

<!-- Confirmation Modal -->
<div id="confirmationModal" style="display:none;">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <h2>üßê Double Check Your Information</h2>
    <p>Please make sure all fields are correctly filled before proceeding to facial verification.</p>
    <div class="modal-buttons">
      <button id="cancelBtn" class="modal-btn cancel">Go Back</button>
      <button id="proceedBtn" class="modal-btn proceed">Proceed to Face Scan</button>
    </div>
  </div>
</div>

<!-- Scripts -->
<script type="module" src="js/verify.js"></script>
<script type="module" src="js/navigation.js"></script>

</body>
</html>